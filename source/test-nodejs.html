<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Limelight|Flamenco|Federo|Yesteryear|Josefin Sans|Spinnaker|Sansita One|Handlee|Droid Sans|Oswald:400,300,700"
  media="screen" rel="stylesheet" type="text/css" />

  <link href="static/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="static/css/bootstrap-responsive.min.css" media="screen" rel="stylesheet" type="text/css"
  />
  <link href="static/css/style.css" media="screen" rel="stylesheet" type="text/css" />
    <!-- Typekit fonts require an account and a kit containing the fonts used. see https://typekit.com/plans
    for details. <script type="text/javascript" src="//use.typekit.net/YOUR_KIT_ID.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
-->

<script src="static/js/jquery-1.8.3.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>

<title>Bridget</title>
</head>

<body>

  <div class="container">
    <div class="row-fluid">
      <span class="span12">

        <p>  We are using node.js <script>document.write(process.version)</script></p>

        <div id="content" class="alert alert-info fade in">
          Loading...
        </div>


  <!-- TEST NODE.JS -->
  <script>

/*
MISC SCRIPT
*/

  function disp(div, message, alertType){
    var myDiv = $(div);
    myDiv.html(message);
    myDiv.removeClass('alert-success alert-error alert-info');
    myDiv.addClass('alert' + ((alertType) ? '-' + alertType : ''));
  }


/*
FS
*/

  var fs = require('fs');

  function listDir (dirName, callback) {
      fs.readdir(dirName, function(err, files) {
      var msg;
        if(err) {
          callback('Error reading '+dirName, 'error');
          return;
        }
        files.forEach(function(file) {
          msg += file + "<br />\n";
        });
        callback(msg, 'success');
      });
  }

</script>
<div>
  <button id="listdir" class="btn">Listdir!</button>
</div>
<script>
$("#listdir").click(function (){
  listDir('./source/static', function (result, alertType){
    disp('#content', result, alertType);
  });
});


/*
NCONF - SAVE CONF
*/

// require local Settings package
var settings = require('./nodejs/settings')

// set the settings file to use
// var settingsPath = process.env['HOME'];
var settingsPath = '/Users/julien/Dropbox/dev/NodeJS/Bridget';
settings.file(settingsPath + '/_bridget_settings.json');

</script>
<div>
  <button id="read-settings" class="btn">Read!</button>
  <button id="save-settings" class="btn">Save!</button>
</div>
<script>
// bind read & save buttons to settings.read and .save functions
$("#read-settings").click(function (){
  settings.read(function (result, alertType){
    disp('#content', result, alertType);
  });
});
$("#save-settings").click(function (){
  settings.save(function (result, alertType){
    disp('#content', result, alertType);
  });
});



/*
NATIVE UI - TRAY, MENU
*/

  // Load native UI library
  var gui = require('nw.gui');

  // Create a tray icon
  var tray = new gui.Tray({ title: 'Bridget', icon: 'tray-icon.png' });

  // Give it a menu
  var menu = new gui.Menu();
  menu.append(new gui.MenuItem({ type: 'checkbox', label: 'box1' }));
  tray.menu = menu;

  // Remove the tray
  // tray.remove();
  // tray = null;

  </script>
<!-- /TEST NODE.JS -->

      </span>
    </div>
  </div>



</body>
</html>
